# Supervisor configuration for POD Studio
# Install: sudo apt install supervisor
# Place in: /etc/supervisor/conf.d/pod-studio.conf
# Start: sudo supervisorctl reread && sudo supervisorctl update

[program:pod-webhook]
command=/home/ubuntu/pod-studio/venv/bin/gunicorn -w 4 -b 0.0.0.0:5000 autonomous_pod:app
directory=/home/ubuntu/pod-studio/backend
user=ubuntu
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/pod-webhook.log
environment=PATH="/home/ubuntu/pod-studio/venv/bin"

[program:pod-scheduler]
command=/home/ubuntu/pod-studio/venv/bin/python scheduler.py
directory=/home/ubuntu/pod-studio/backend
user=ubuntu
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/pod-scheduler.log
environment=PATH="/home/ubuntu/pod-studio/venv/bin"

[group:pod-studio]
programs=pod-webhook,pod-scheduler
priority=999
